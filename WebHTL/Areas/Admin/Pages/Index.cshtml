@page
@model WebAppRazorpage.Pages.Areas.Admin.IndexModel
@{
    Layout = "_AdminLayout";
}
<div class="row">
    <div class="col-md-3">
        <div class="card p-30">
            <div class="media">
                <div class="media-left meida media-middle">
                    <span><i class="fa fa-usd f-s-40 color-primary"></i></span>
                </div>
                <div class="media-body media-text-right">
                    <h2>@Model.TotalRevenue.ToString("C")</h2> <!-- Cập nhật giá trị ở đây -->
                    <p class="m-b-0">Month's Revenue</p>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card p-30">
            <div class="media">
                <div class="media-left meida media-middle">
                    <span><i class="fa fa-shopping-cart f-s-40 color-success"></i></span>
                </div>
                <div class="media-body media-text-right">
                    <h2>@Model.TotalOrders</h2> <!-- Cập nhật giá trị ở đây -->
                    <p class="m-b-0">Month's Sales</p>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card p-30">
            <div class="media">
                <div class="media-left meida media-middle">
                    <span><i class="fa fa-archive f-s-40 color-warning"></i></span>
                </div>
                <div class="media-body media-text-right">
                    <h2>@Model.TotalStores</h2> <!-- Cập nhật giá trị ở đây -->
                    <p class="m-b-0">Total Orders</p>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card p-30">
            <div class="media">
                <div class="media-left meida media-middle">
                    <span><i class="fa fa-user f-s-40 color-danger"></i></span>
                </div>
                <div class="media-body media-text-right">
                    <h2>@Model.TotalNewUsers</h2> <!-- Cập nhật giá trị ở đây -->
                    <p class="m-b-0">Month's New Customer</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row bg-white m-l-0 m-r-0 box-shadow ">

    <!-- column -->
    <div class="col-lg-8">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Extra Area Chart</h4>
                <div id="extra-area-chart-mounthly"></div>
            </div>
        </div>
    </div>
    <!-- column -->
    <!-- column -->
    <div class="col-lg-4">
        <div class="card">
            <div class="card-body browser">
                <p class="f-w-600">iMacs <span class="pull-right">85%</span></p>
                <div class="progress ">
                    <div role="progressbar" style="width: 85%; height:8px;" class="progress-bar bg-danger wow animated progress-animated"> <span class="sr-only">60% Complete</span> </div>
                </div>

                <p class="m-t-30 f-w-600">iBooks<span class="pull-right">90%</span></p>
                <div class="progress">
                    <div role="progressbar" style="width: 90%; height:8px;" class="progress-bar bg-info wow animated progress-animated"> <span class="sr-only">60% Complete</span> </div>
                </div>

                <p class="m-t-30 f-w-600">iPhone<span class="pull-right">65%</span></p>
                <div class="progress">
                    <div role="progressbar" style="width: 65%; height:8px;" class="progress-bar bg-success wow animated progress-animated"> <span class="sr-only">60% Complete</span> </div>
                </div>

                <p class="m-t-30 f-w-600">Samsung<span class="pull-right">65%</span></p>
                <div class="progress">
                    <div role="progressbar" style="width: 65%; height:8px;" class="progress-bar bg-warning wow animated progress-animated"> <span class="sr-only">60% Complete</span> </div>
                </div>

                <p class="m-t-30 f-w-600">android<span class="pull-right">65%</span></p>
                <div class="progress m-b-30">
                    <div role="progressbar" style="width: 65%; height:8px;" class="progress-bar bg-success wow animated progress-animated"> <span class="sr-only">60% Complete</span> </div>
                </div>
            </div>
        </div>
    </div>
    <!-- column -->
</div>

<div class="row">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-title">
                <h4>Recent Orders </h4>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Status</th>
                                <th>Total</th>
                                <th>Last Update</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var order in Model.RecentOrdersWithUsers)
                            {
                                <tr>
                                    <td>@(order.Account?.UserName ?? "N/A")</td>
                                    <td>@order.OrderStatus</td>
                                    <td>@order.Total</td>
                                    <td>@order.LastUpdated.ToString("dd/MM/yyyy HH:mm")</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

@section head{
    <link href="~/admin/assets/css/lib/calendar2/semantic.ui.min.css" rel="stylesheet">
    <link href="~/admin/assets/css/lib/calendar2/pignose.calendar.min.css" rel="stylesheet">
    <link href="~/admin/assets/css/lib/owl.carousel.min.css" rel="stylesheet" />
    <link href="~/admin/assets/css/lib/owl.theme.default.min.css" rel="stylesheet" />
}
@section scripts{
    <!-- Amchart -->
    <script src="~/admin/assets/js/lib/morris-chart/raphael-min.js"></script>
    <script src="~/admin/assets/js/lib/morris-chart/morris.js"></script>
    <script src="~/admin/assets/js/lib/morris-chart/dashboard1-init.js"></script>


    <script src="~/admin/assets/js/lib/calendar-2/moment.latest.min.js"></script>
    <!-- scripit init-->
    <script src="~/admin/assets/js/lib/calendar-2/semantic.ui.min.js"></script>
    <!-- scripit init-->
    <script src="~/admin/assets/js/lib/calendar-2/prism.min.js"></script>
    <!-- scripit init-->
    <script src="~/admin/assets/js/lib/calendar-2/pignose.calendar.min.js"></script>
    <!-- scripit init-->
    <script src="~/admin/assets/js/lib/calendar-2/pignose.init.js"></script>

    <script src="~/admin/assets/js/lib/owl-carousel/owl.carousel.min.js"></script>
    <script src="~/admin/assets/js/lib/owl-carousel/owl.carousel-init.js"></script>

    <script src="~/admin/assets/js/scripts.js"></script>
    <!-- scripit init-->
    <!-- Chart -->
    <script>
        $(function () {
        "use strict";

        // Fetch data from your services
        var monthlyOrders = @Html.Raw(Json.Serialize(Model.MounthlyOrders));
        var monthlyUsers = @Html.Raw(Json.Serialize(Model.MounthlyUsers));

        // Prepare data for the chart
        var chartData = []; // This will hold our chart data

        // Assuming monthlyOrders and monthlyUsers are lists with Date, OrderCount, and UserCount properties
        // Loop through the days of the month
        for (var i = 0; i < monthlyOrders.length; i++) {
            chartData.push({
                period: monthlyOrders[i].CreatedTime.substring(0, 10), // Extracting the date part in 'YYYY-MM-DD' format
                orders: monthlyOrders[i].OrderCount, // Replace with actual property for order count if different
                users: monthlyUsers[i].UserCount // Replace with actual property for user count if different
            });
        }

        // Initialize chart with the prepared data
        Morris.Area({
            element: 'extra-area-chart-mounthly',
            data: chartData,
            xkey: 'period',
            ykeys: ['orders', 'users'],
            labels: ['Orders', 'New Users'],
            pointSize: 2,
            fillOpacity: 0.3,
            pointStrokeColors: ['#b4becb', '#01c0c8'],
            behaveLikeLine: true,
            gridLineColor: '#e0e0e0',
            lineWidth: 2,
            smooth: true,
            hideHover: 'auto',
            lineColors: ['#5867dd', '#00c292'],
            resize: true,
            parseTime: false, // Set to false because we are providing dates in 'YYYY-MM-DD' format
            dateFormat: function (x) { return new Date(x).toLocaleDateString(); },
            yLabelFormat: function(y) { return y.toFixed(0); }
        });
     });
</script>
}